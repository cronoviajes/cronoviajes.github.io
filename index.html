<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cronoviajes ‚Äî Viaje al C√°mbrico ¬∑ Descubre el pasado, vive el origen</title>
  <meta name="description" content="Cronoviajes: Agencia de viajes al pasado (C√°mbrico). Proyecto educativo con galer√≠a, informaci√≥n cient√≠fica, juegos y reservas." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /*******************************
     * Styles principales
     *******************************/
    :root{
      --green-1:#0b6623;
      --green-2:#2d6a4f;
      --accent:#00b4d8;
      --card:#ffffff;
      --muted:#5c7a89;
      --maxw:1200px;
      --radius:12px;
      --text-dark:#042a10;
      --text-light:#ffffff;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text-dark);background:#f4fbf4;-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}

    /* HEADER */
    header.top{
      background:linear-gradient(135deg,var(--green-1),var(--green-2));
      color:var(--text-light);
      padding:20px 16px;
      box-shadow:0 12px 40px rgba(2,40,20,0.14);
    }
    .top-inner{max-width:var(--maxw);margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:68px;height:68px;border-radius:14px;background:linear-gradient(135deg,#ffd166,var(--accent));display:flex;align-items:center;justify-content:center;font-weight:900;color:var(--text-dark);font-size:22px;box-shadow:0 8px 26px rgba(0,0,0,0.15)}
    .brand h1{font-family:"Playfair Display",serif;font-size:20px;margin:0}
    .slogan{font-style:italic;font-weight:600;opacity:.95;font-size:13px}
    .mini{font-size:12px;opacity:.9}

    /* NAV */
    nav.topnav{max-width:var(--maxw);margin:14px auto;display:flex;justify-content:center;gap:10px;padding:8px 12px}
    nav.topnav a{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.06);color:var(--text-light);font-weight:700}
    nav.topnav a:hover{transform:translateY(-3px);background:rgba(255,255,255,0.09)}

    main{max-width:var(--maxw);margin:20px auto;padding:0 18px}

    /*******************************
     * HERO - SLIDER (verde)
     *******************************/
    .hero{
      position:relative;height:74vh;min-height:520px;border-radius:18px;overflow:hidden;margin-bottom:24px;background:linear-gradient(135deg,var(--green-1),var(--green-2));box-shadow:0 18px 60px rgba(2,40,20,0.08);color:var(--text-light);
    }
    .hero .slider{position:absolute;inset:0;z-index:0;overflow:hidden}
    .hero .slide{position:absolute;inset:0;width:100%;height:100%;background-size:cover;background-position:center;opacity:0;transition:opacity 1.2s ease-in-out}
    .hero .slide.active{opacity:1}
    .hero .overlay{position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.12));z-index:1}
    .hero .inner{position:relative;z-index:2;display:grid;grid-template-columns:1fr 420px;gap:26px;align-items:center;padding:44px;max-width:var(--maxw);margin:0 auto}
    @media(max-width:980px){.hero .inner{grid-template-columns:1fr;padding:28px}}
    .hero .title{font-family:"Playfair Display",serif;font-size:44px;line-height:1;margin:0;color:var(--text-light)}
    .hero .subtitle{margin-top:8px;font-weight:600;color:var(--text-light);font-size:18px}
    .hero p{color:rgba(255,255,255,0.95);max-width:62ch}
    .btn{background:var(--accent);color:var(--text-dark);padding:12px 18px;border-radius:10px;border:none;font-weight:800;cursor:pointer;box-shadow:0 12px 30px rgba(0,120,160,0.12)}
    .btn.secondary{background:transparent;color:var(--text-light);border:1px solid rgba(255,255,255,0.12)}

    /*******************************
     * PANELS / CONTENT
     *******************************/
    section.panel{background:var(--card);border-radius:12px;padding:18px;margin-bottom:18px;box-shadow:0 8px 28px rgba(0,0,0,0.06)}
    h2.section-title{color:var(--green-2);margin-bottom:10px}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .col-7{grid-column:span 7}.col-5{grid-column:span 5}
    @media(max-width:900px){.col-7,.col-5{grid-column:1/-1}}

    /*******************************
     * GALLERY
     *******************************/
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .gallery img{width:100%;height:160px;object-fit:cover;border-radius:10px;cursor:pointer;transition:transform .16s,box-shadow .16s}
    .gallery img:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,48,71,0.12)}

    /*******************************
     * GAMES
     *******************************/
    .games{display:flex;gap:16px;flex-wrap:wrap}
    .game{flex:1 1 320px;background:linear-gradient(180deg,#fff,#f7fffb);border-radius:12px;padding:12px;box-shadow:0 10px 30px rgba(0,0,0,0.06);min-height:260px}
    canvas{width:100%;height:220px;border-radius:10px;display:block;background:linear-gradient(180deg,#e8f6ff,#ffffff);border:1px solid rgba(0,80,100,0.06)}
    #memoryBoard{display:grid;grid-template-columns:repeat(4,100px);gap:8px;justify-content:center}

    /*******************************
     * FORMS
     *******************************/
    input,textarea,select{padding:8px;border-radius:6px;border:1px solid var(--green-2);width:100%;max-width:320px;margin-top:8px}
    textarea{min-height:80px}

    /*******************************
     * FOOTER
     *******************************/
    footer{margin-top:22px;padding:18px;background:linear-gradient(90deg,var(--green-2),var(--accent));color:var(--text-light);border-radius:10px;text-align:center}

    @media(max-width:720px){
      nav.topnav{padding:0 8px}
      .hero .inner{grid-template-columns:1fr}
      .brand h1{font-size:18px}
    }
    /* small helpers */
    .muted-sm{color:#6b7780;font-size:13px}
    .kbd{background:#eef7f1;padding:4px 8px;border-radius:6px;font-weight:700;margin-left:6px}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="top" role="banner">
    <div class="top-inner">
      <div class="brand" aria-hidden="false">
        <div class="logo" aria-hidden="true">Cv</div>
        <div>
          <h1>Cronoviajes</h1>
          <div class="slogan">Descubre el pasado, vive el origen</div>
        </div>
      </div>
      <div class="mini">Proyecto educativo ‚Äî Agencia temporal (simulada)</div>
    </div>
  </header>

  <!-- NAV -->
  <nav class="topnav" role="navigation" aria-label="Navegaci√≥n principal">
    <a href="#" onclick="openSection('inicio');return false;">Inicio</a>
    <a href="#" onclick="openSection('galeria');return false;">Galer√≠a</a>
    <a href="#" onclick="openSection('info');return false;">Informaci√≥n</a>
    <a href="#" onclick="openSection('juegos');return false;">Juegos</a>
    <a href="#" onclick="openSection('reservar');return false;">Reservar</a>
  </nav>

  <main>
    <!-- HERO / INICIO -->
    <section id="inicio" class="hero panel" role="region" aria-labelledby="inicioTitle">
      <div class="slider" id="slider">
        <!-- Slideshow: 4 im√°genes enlazadas -->
        <div class="slide active" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/9/99/Cambrian_ocean_life.jpg');" aria-hidden="false"></div>
        <div class="slide" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/0/01/Hallucigenia_sparsa_Burgess_Shale.png');" aria-hidden="true"></div>
        <div class="slide" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/2/2b/Marrella_splendida_Burgess_Shale.jpg');" aria-hidden="true"></div>
        <div class="slide" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/9/96/Opabinia_regalis.png');" aria-hidden="true"></div>
      </div>

      <div class="overlay" aria-hidden="true"></div>

      <div class="inner">
        <div>
          <h2 class="title" id="inicioTitle">Viaja al C√°mbrico con Cronoviajes</h2>
          <div class="subtitle">Experiencias cient√≠ficas dirigidas</div>
          <p>Te ofrecemos viajes controlados por c√°psulas blindadas al oc√©ano del C√°mbrico ‚Äî observaci√≥n de fauna, clases de campo con paleont√≥logos y registro de f√≥siles excepcionales. (Sitio simulado para proyecto escolar.)</p>

          <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn" onclick="openSection('reservar')">Reservar ahora</button>
            <button class="btn secondary" id="toggleContrast">Contraste</button>
            <div style="align-self:center;color:rgba(255,255,255,0.9);margin-left:8px;font-size:13px">Atajos: <span class="kbd">1</span>=Recolector <span class="kbd">2</span>=Memoria</div>
          </div>
        </div>

        <div>
          <div style="background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));padding:14px;border-radius:12px;color:#fff">
            <strong>Pr√≥ximas salidas</strong>
            <p style="margin-top:8px">Tours diarios en grupo reducido. Programas educativos para colegios.</p>
            <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
              <div style="background:#eaf9ff;padding:8px 10px;border-radius:8px;font-weight:700;color:var(--text-dark)">Explorador</div>
              <div style="background:#fff3d6;padding:8px 10px;border-radius:8px;font-weight:700;color:var(--text-dark)">Premium</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- GALER√çA -->
    <section id="galeria" class="panel" style="display:none;opacity:0;transform:translateY(30px);" role="region" aria-labelledby="galTitle">
      <h2 class="section-title" id="galTitle">Galer√≠a ‚Äî F√≥siles & Reconstrucciones</h2>
      <p class="muted">Im√°genes p√∫blicas (Wikimedia / Pexels) de f√≥siles y reconstrucciones del C√°mbrico ‚Äî haz clic para ampliar.</p>
      <div class="gallery" id="galleryGrid" aria-live="polite">
        <!-- Lista amplia de im√°genes p√∫blicas -->
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/33/Anomalocaris_Canadian_Museum_Nature.jpg" alt="Anomalocaris">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/Trilobite_Crotalocephalus_gibbus_2.JPG" alt="Trilobite">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/2b/Marrella_splendida_Burgess_Shale.jpg" alt="Marrella">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fc/Pikaia_gracilens_Burgess_Shale.png" alt="Pikaia">
        <img src="https://upload.wikimedia.org/wikipedia/commons/0/01/Hallucigenia_sparsa_Burgess_Shale.png" alt="Hallucigenia">
        <img src="https://upload.wikimedia.org/wikipedia/commons/9/96/Opabinia_regalis.png" alt="Opabinia">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b9/Wiwaxia_fieldensis.jpg" alt="Wiwaxia">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/49/Habelia_optata.jpg" alt="Habelia">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/8e/Leanchoilia_illustris.jpg" alt="Leanchoilia">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/20/Chengjiang_fossil_Diangyi.jpg" alt="F√≥sil Chengjiang">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/24/EarlyCambrian_fossil_Marinella.jpg" alt="Small Shelly Fossils">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/58/Burgess_Shale_trilobite_and_associates.jpg" alt="Burgess Shale">
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/10/Pikaia_ventral2006.jpg" alt="Pikaia detalle">
        <img src="https://images.pexels.com/photos/1103569/pexels-photo-1103569.jpeg" alt="Oc√©ano primitivo - ilustraci√≥n">
        <img src="https://images.pexels.com/photos/1076758/pexels-photo-1076758.jpeg" alt="Investigadores (reconstrucci√≥n)">
        <img src="https://images.pexels.com/photos/533923/pexels-photo-533923.jpeg" alt="Paisaje marino antiguo">
      </div>
    </section>

    <!-- INFORMACI√ìN EXTENSA -->
    <section id="info" class="panel" style="display:none;opacity:0;transform:translateY(30px);" role="region" aria-labelledby="infoTitle">
      <h2 class="section-title" id="infoTitle">Informaci√≥n cient√≠fica ampliada ‚Äî El C√°mbrico</h2>

      <p class="muted">A continuaci√≥n tienes una recopilaci√≥n amplia y ordenada de informaci√≥n √∫til para tu trabajo del instituto.</p>

      <h3>1. Cronolog√≠a y contexto</h3>
      <p>El C√°mbrico se extiende aproximadamente desde <strong>541</strong> hasta <strong>485 millones de a√±os</strong> atr√°s. Se considera el inicio de la Era Paleozoica. En la escala temporal geol√≥gica es un intervalo relativamente corto en el que se produjo una gran diversificaci√≥n biol√≥gica conocida como la <strong>Explosi√≥n C√°mbrica</strong>.</p>

      <h3>2. Geolog√≠a y paleogeograf√≠a</h3>
      <ul>
        <li>Los continentes modernos no exist√≠an como ahora; predominaban plataformas marinas y archipi√©lagos sobre grandes plataformas someras.</li>
        <li>Placas importantes: <em>Laurentia</em>, <em>Baltica</em>, <em>Siberia</em> y el gran <em>Gondwana</em>.</li>
        <li>Las cuencas epicontinentales eran extensas: favorables para la sedimentaci√≥n y preservaci√≥n de f√≥siles.</li>
      </ul>

      <h3>3. Clima y qu√≠mica oce√°nica</h3>
      <ul>
        <li>Ambiente generalmente c√°lido; concentraciones altas de CO‚ÇÇ comparadas con la era moderna.</li>
        <li>Estratificaci√≥n oce√°nica: capas superficiales oxigenadas y fondos locales an√≥xicos que favorecieron la preservaci√≥n de tejidos blandos.</li>
        <li>Niveles de nutrientes elevaban la productividad primaria en plataformas someras.</li>
      </ul>

      <h3>4. Biodiversidad - organismos clave</h3>
      <p>El C√°mbrico introdujo una amplia variedad de planes corporales y modos de vida:</p>
      <ul>
        <li><strong>Trilobites:</strong> artr√≥podos con exoesqueleto calc√°reo y ojos compuestos; su radiaci√≥n es una de las m√°s documentadas.</li>
        <li><strong>Anomalocaris:</strong> depredador √°pice, pruebas de cadenas tr√≥ficas complejas.</li>
        <li><strong>Pikaia:</strong> cordado primitivo; importante por su relaci√≥n con los primeros vertebrados.</li>
        <li><strong>Wiwaxia, Hallucigenia, Opabinia:</strong> ejemplos de morfolog√≠as experimentales del C√°mbrico.</li>
        <li><strong>Braqui√≥podos, esponjas, briozoos:</strong> filtradores dominantes en fondos someros.</li>
      </ul>

      <h3>5. Yacimientos con conservaci√≥n excepcional</h3>
      <ul>
        <li><strong>Burgess Shale</strong> (Canad√°): f√≥siles con tejidos blandos, clave para reconstruir anatom√≠as.</li>
        <li><strong>Chengjiang</strong> (China): registro del C√°mbrico inferior con preservaci√≥n de partes blandas.</li>
        <li><strong>Sirius Passet</strong> (Groenlandia): aporta informaci√≥n complementaria.</li>
      </ul>

      <h3>6. M√©todos de estudio</h3>
      <ul>
        <li>Dataci√≥n radiom√©trica (U-Pb, Pb-Pb) para edades absolutas.</li>
        <li>Tomograf√≠a, SEM, an√°lisis de microestructuras y reconstrucci√≥n 3D para anatom√≠a.</li>
        <li>Modelos paleoecol√≥gicos, an√°lisis de is√≥topos y bioestad√≠stica para entender ecosistemas.</li>
      </ul>

      <h3>7. Importancia evolutiva</h3>
      <p>El evento c√°mbrico sent√≥ las bases para la evoluci√≥n de √≥rganos sensoriales complejos, locomoci√≥n activa y relaciones tr√≥ficas que permiten ecosistemas m√°s estructurados.</p>

      <h3>8. Datos √∫tiles para tu trabajo</h3>
      <ul>
        <li>Fecha de inicio de la Explosi√≥n C√°mbrica ~ <strong>541 Ma</strong>.</li>
        <li>La duraci√≥n en millones de a√±os: el C√°mbrico dura ~56 Ma (541‚Äì485 Ma).</li>
        <li>Yacimientos con tejidos blandos son cruciales para entender anatom√≠a y comportamiento.</li>
      </ul>

      <h3>9. Referencias y recursos</h3>
      <p class="muted">Wikipedias, art√≠culos sobre Burgess Shale y Chengjiang, libros de paleobiolog√≠a y recursos educativos de museos son buenas fuentes para citar (ver el manual de tu centro para formato de citas).</p>
    </section>

    <!-- JUEGOS -->
    <section id="juegos" class="panel" style="display:none;opacity:0;transform:translateY(30px);" role="region" aria-labelledby="juegosTitle">
      <h2 class="section-title" id="juegosTitle">Zona de juegos</h2>
      <p class="muted">Pulsa INICIAR para empezar cada experiencia ‚Äî los juegos no arrancan solos.</p>

      <div class="games">
        <!-- RECOLECTOR -->
        <div class="game" aria-label="Recolector del Tiempo">
          <h3>üõ∏ Recolector del Tiempo (Avi√≥n atrapapalabras)</h3>
          <p>Mueve el avi√≥n con las flechas ‚Üê ‚Üí. Atrapa palabras relacionadas con el C√°mbrico y evita las equivocadas. Pulsa "Iniciar Recolector".</p>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
            <button class="btn" id="startCollector">Iniciar Recolector</button>
            <button class="btn secondary" id="stopCollector">Parar / Reiniciar</button>
            <div style="margin-left:auto;font-weight:700;color:var(--green-2)">Puntos: <span id="collectorScore">0</span></div>
          </div>
          <canvas id="collectorCanvas" width="640" height="260" aria-label="Canvas Recolector"></canvas>
        </div>

        <!-- MEMORIA -->
        <div class="game" aria-label="Memoria f√≥sil">
          <h3>üß© Memoria F√≥sil</h3>
          <p>Empareja im√°genes id√©nticas (8 pares). Pulsa "Iniciar Memoria".</p>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
            <button class="btn" id="startMemory">Iniciar Memoria</button>
            <button class="btn secondary" id="resetMemory">Reiniciar</button>
            <div style="margin-left:auto;font-weight:700;color:var(--green-2)">Aciertos: <span id="memoryHits">0</span></div>
          </div>
          <div id="memoryBoard"></div>
        </div>
      </div>
    </section>

    <!-- RESERVAS -->
    <section id="reservar" class="panel" style="display:none;opacity:0;transform:translateY(30px);" role="region" aria-labelledby="reservTitle">
      <h2 class="section-title" id="reservTitle">Reservas ‚Äî Formulario (simulado)</h2>
      <p class="muted">Selecciona tu entrada y salida. Las reservas son simuladas para el proyecto escolar.</p>

      <form id="bookingForm" onsubmit="return handleBooking(event)" style="display:grid;gap:10px;max-width:720px">
        <label>Fecha de entrada: <input type="date" id="dateIn" required></label>
        <label>Fecha de salida: <input type="date" id="dateOut" required></label>
        <label>Nombre completo: <input type="text" id="fullName" required></label>
        <label>Email: <input type="email" id="email" required></label>
        <label>N√∫mero de viajeros: <input type="number" id="numPeople" min="1" max="20" value="1" required></label>
        <label>Comentarios: <textarea id="notes"></textarea></label>
        <div style="display:flex;gap:8px">
          <button class="btn" type="submit">Enviar Reserva</button>
          <button class="btn secondary" type="button" onclick="document.getElementById('bookingForm').reset()">Limpiar</button>
        </div>
        <p id="bookingMsg" class="muted"></p>
      </form>
    </section>

  </main>

  <footer role="contentinfo">
    <div style="max-width:var(--maxw);margin:0 auto">
      <strong>Cronoviajes S.A.</strong> ‚Äî ¬© <span id="year"></span> ‚Äî ‚ÄúDescubre el pasado, vive el origen.‚Äù
    </div>
  </footer>

  <!-- SCRIPTS: slider, gallery lightbox, juegos, reserva -->
  <script>
  // Helper short selectors
  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  document.getElementById('year').textContent = new Date().getFullYear();

  // Section open/hide
  function openSection(id){
    const sections = document.querySelectorAll('main > section');
    sections.forEach(s=>{
      s.style.display = 'none';
      s.style.opacity = 0;
      s.style.transform = 'translateY(30px)';
    });
    const el = document.getElementById(id);
    if(!el) return;
    el.style.display = 'block';
    setTimeout(()=> { el.style.opacity = 1; el.style.transform = 'translateY(0)'; }, 40);
    el.scrollIntoView({behavior:'smooth', block:'start'});
  }
  // default
  openSection('inicio');

  /* -------------------------
     SLIDER: cambia cada 3s, pausa on hover
     ------------------------- */
  (function initSlider(){
    const slides = Array.from(document.querySelectorAll('.slide'));
    let idx = 0, timer=null;
    function show(i){
      slides.forEach((s,j)=> s.classList.toggle('active', i===j));
    }
    function start(){
      timer = setInterval(()=> { idx = (idx+1)%slides.length; show(idx); }, 3000);
    }
    function stop(){ if(timer){ clearInterval(timer); timer=null; } }
    window.addEventListener('load', start);
    const slider = $('#slider');
    slider.addEventListener('mouseenter', stop);
    slider.addEventListener('mouseleave', ()=> { if(!timer) start(); });
    // expose
    window.cronoSlider = { start, stop, show };
  })();

  // Toggle contrast quick effect for hero
  $('#toggleContrast').addEventListener('click', ()=>{
    const hero = document.querySelector('.hero');
    hero.classList.toggle('light');
    const light = hero.classList.contains('light');
    document.querySelectorAll('.hero .title,.hero .subtitle').forEach(e=> e.style.color = light ? '#012' : '#fff');
  });

  /* -------------------------
     GALLERY LIGHTBOX
     ------------------------- */
  (function galleryLightbox(){
    const grid = document.getElementById('galleryGrid');
    if(!grid) return;
    grid.addEventListener('click', (e) => {
      if(e.target.tagName !== 'IMG') return;
      const overlay = document.createElement('div');
      overlay.style.position='fixed'; overlay.style.inset=0; overlay.style.background='rgba(0,0,0,0.9)'; overlay.style.display='flex';
      overlay.style.alignItems='center'; overlay.style.justifyContent='center'; overlay.style.zIndex=9999; overlay.style.cursor='zoom-out';
      const img = document.createElement('img'); img.src = e.target.src; img.alt = e.target.alt || ''; img.style.maxWidth='94%'; img.style.maxHeight='94%'; img.style.borderRadius='8px';
      overlay.appendChild(img);
      overlay.addEventListener('click', ()=> overlay.remove());
      document.body.appendChild(overlay);
    });
  })();

  /* -------------------------
     GAME 1: Recolector del Tiempo (plane)
     - controlled start/stop
     - arrow keys left/right
     ------------------------- */
  (function collector(){
    const canvas = document.getElementById('collectorCanvas');
    if(!canvas) return;
    const ctx = canvas.getContext('2d');
    let dpr = window.devicePixelRatio || 1;
    function resize(){
      const rect = canvas.getBoundingClientRect();
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    window.addEventListener('resize', resize);

    const vocab = [
      { t: 'Trilobite', ok:true },
      { t: 'Anomalocaris', ok:true },
      { t: 'Pikaia', ok:true },
      { t: 'Opabinia', ok:true },
      { t: 'Hallucigenia', ok:true },
      { t: 'Dinosaurio', ok:false },
      { t: 'Tel√©fono', ok:false },
      { t: 'Coche', ok:false },
      { t: 'Braqui√≥podo', ok:true },
      { t: 'Esponja', ok:true }
    ];

    let state = {
      running:false,
      player: { x: 300, y: 220, w: 48, h: 18 },
      vx: 0,
      objects: [],
      tick:0,
      score:0,
      lives:3,
      raf: null
    };

    function spawn(){
      const p = vocab[Math.floor(Math.random()*vocab.length)];
      const x = 20 + Math.random()*(canvas.width/dpr - 40);
      state.objects.push({ x, y: -10, vy: 1 + Math.random()*1.8, t: p.t, ok: p.ok });
    }

    function update(){
      state.player.x += state.vx;
      if(state.player.x < 0) state.player.x = 0;
      if(state.player.x > canvas.width/dpr - state.player.w) state.player.x = canvas.width/dpr - state.player.w;

      if(Math.random() < 0.03) spawn();

      for(let i = state.objects.length -1; i >= 0; i--){
        const o = state.objects[i];
        o.y += o.vy;
        if(o.y > state.player.y - 6 && o.y < state.player.y + state.player.h + 6 && o.x > state.player.x - 20 && o.x < state.player.x + state.player.w + 20){
          if(o.ok) state.score += 10; else state.lives = Math.max(0, state.lives - 1);
          state.objects.splice(i,1);
          updateHUD();
        } else if(o.y > canvas.height/dpr + 20){
          state.objects.splice(i,1);
        }
      }
    }

    function draw(){
      const H = canvas.height/dpr;
      const g = ctx.createLinearGradient(0,0,0,H); g.addColorStop(0,'#e6fbff'); g.addColorStop(1,'#d9f3ff');
      ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width/dpr,canvas.height/dpr);
      ctx.fillStyle = '#cfeef8'; ctx.fillRect(0,H-18,canvas.width/dpr,18);

      // player
      ctx.fillStyle = '#005f7f';
      ctx.fillRect(state.player.x, state.player.y, state.player.w, state.player.h);
      ctx.fillStyle = '#00b4d8';
      ctx.fillRect(state.player.x+6, state.player.y+4, state.player.w-12, state.player.h-8);

      // objects
      ctx.font = '13px Poppins';
      for(const o of state.objects){
        ctx.fillStyle = o.ok ? '#2e7d32' : '#c62828';
        ctx.fillText(o.t, o.x, o.y);
      }

      // HUD
      ctx.fillStyle = '#003a55'; ctx.font = '14px Poppins';
      ctx.fillText('Puntuaci√≥n: ' + state.score, 12, 20);
      ctx.fillText('Vidas: ' + state.lives, canvas.width/dpr - 86, 20);
    }

    function loop(){
      if(!state.running) return;
      state.tick++;
      update();
      draw();
      if(state.lives <= 0){
        state.running = false;
        cancelAnimationFrame(state.raf);
        alert('Juego terminado. Puntuaci√≥n: ' + state.score);
        updateHUD();
        return;
      }
      state.raf = requestAnimationFrame(loop);
    }

    function updateHUD(){
      document.getElementById('collectorScore').textContent = state.score;
    }

    // keyboard control
    const keys = {};
    window.addEventListener('keydown', (e)=> {
      keys[e.key] = true;
      if(e.key === 'ArrowLeft') state.vx = -5;
      if(e.key === 'ArrowRight') state.vx = 5;
    });
    window.addEventListener('keyup', (e)=> {
      keys[e.key] = false;
      if(e.key === 'ArrowLeft' || e.key === 'ArrowRight') state.vx = 0;
    });

    // start / stop
    $('#startCollector').addEventListener('click', ()=>{
      resize();
      state.running = true; state.objects = []; state.tick = 0; state.score = 0; state.lives = 3;
      state.player.x = canvas.width/dpr/2 - state.player.w/2;
      updateHUD();
      if(state.raf) cancelAnimationFrame(state.raf);
      loop();
    });
    $('#stopCollector').addEventListener('click', ()=>{
      state.running = false;
      if(state.raf) cancelAnimationFrame(state.raf);
      resize();
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#003a55'; ctx.font = '14px Poppins';
      ctx.fillText('Pulsa "Iniciar Recolector" para comenzar.', 12, 22);
      document.getElementById('collectorScore').textContent = 0;
    });

    // initial draw
    window.addEventListener('load', ()=>{
      resize();
      ctx.fillStyle = '#003a55'; ctx.font = '14px Poppins';
      ctx.fillText('Pulsa "Iniciar Recolector" para comenzar.', 12, 22);
    });
  })();

  /* -------------------------
     GAME 2: Memoria - tablero de 8 pares
     ------------------------- */
  (function memory(){
    const board = document.getElementById('memoryBoard');
    const images = [
      "https://upload.wikimedia.org/wikipedia/commons/3/33/Anomalocaris_Canadian_Museum_Nature.jpg",
      "https://upload.wikimedia.org/wikipedia/commons/6/65/Trilobite_Crotalocephalus_gibbus_2.JPG",
      "https://upload.wikimedia.org/wikipedia/commons/2/2b/Marrella_splendida_Burgess_Shale.jpg",
      "https://upload.wikimedia.org/wikipedia/commons/f/fc/Pikaia_gracilens_Burgess_Shale.png",
      "https://upload.wikimedia.org/wikipedia/commons/0/01/Hallucigenia_sparsa_Burgess_Shale.png",
      "https://upload.wikimedia.org/wikipedia/commons/9/96/Opabinia_regalis.png",
      "https://upload.wikimedia.org/wikipedia/commons/b/b9/Wiwaxia_fieldensis.jpg",
      "https://upload.wikimedia.org/wikipedia/commons/4/49/Habelia_optata.jpg"
    ];

    let tiles = [];
    let openTiles = [];
    let hits = 0;

    function build(){
      tiles = images.concat(images).map(src => ({ src, revealed:false, matched:false }));
      tiles.sort(()=>Math.random()-0.5);
      board.innerHTML = '';
      board.style.gridTemplateColumns = 'repeat(4,100px)';
      tiles.forEach((t, i) => {
        const cell = document.createElement('div');
        cell.style.width='100px'; cell.style.height='100px'; cell.style.borderRadius='8px';
        cell.style.background='#cfefe3'; cell.style.display='flex'; cell.style.alignItems='center'; cell.style.justifyContent='center';
        cell.style.cursor='pointer'; cell.dataset.index = i;
        const img = document.createElement('img');
        img.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Question_mark_%28black%29.svg/1200px-Question_mark_%28black%29.svg.png';
        img.style.width='62px'; img.style.height='62px';
        cell.appendChild(img);
        cell.addEventListener('click', ()=> onClickTile(i, cell));
        board.appendChild(cell);
      });
      openTiles = []; hits = 0; document.getElementById('memoryHits').textContent = hits;
    }

    function onClickTile(idx, cell){
      const t = tiles[idx];
      if(t.matched || t.revealed || openTiles.length === 2) return;
      cell.firstElementChild.src = t.src;
      t.revealed = true;
      openTiles.push({ idx, cell });
      if(openTiles.length === 2){
        const a = openTiles[0], b = openTiles[1];
        if(tiles[a.idx].src === tiles[b.idx].src){
          tiles[a.idx].matched = tiles[b.idx].matched = true;
          a.cell.style.background = b.cell.style.background = '#80cbc4';
          hits += 1;
          document.getElementById('memoryHits').textContent = hits;
          openTiles = [];
          if(hits === images.length) setTimeout(()=> alert('¬°Has encontrado todas las parejas!'), 250);
        } else {
          setTimeout(()=>{
            a.cell.firstElementChild.src = b.cell.firstElementChild.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Question_mark_%28black%29.svg/1200px-Question_mark_%28black%29.svg.png';
            tiles[a.idx].revealed = tiles[b.idx].revealed = false;
            openTiles = [];
          }, 700);
        }
      }
    }

    $('#startMemory').addEventListener('click', build);
    $('#resetMemory').addEventListener('click', build);
    // build initial board (hidden until user opens JUEGOS)
    build();
    window.iniciarMemoria = build;
  })();

  /* -------------------------
     BOOKING: simple validation
     ------------------------- */
  function handleBooking(e){
    e.preventDefault();
    const inDate = document.getElementById('dateIn').value;
    const outDate = document.getElementById('dateOut').value;
    const name = document.getElementById('fullName').value.trim();
    const email = document.getElementById('email').value.trim();
    if(!inDate || !outDate){ document.getElementById('bookingMsg').textContent = 'Selecciona entrada y salida.'; return false; }
    const d1 = new Date(inDate); const d2 = new Date(outDate); d1.setHours(0,0,0,0); d2.setHours(0,0,0,0);
    if(d2 <= d1){ document.getElementById('bookingMsg').textContent = 'La fecha de salida debe ser posterior a la de entrada.'; return false; }
    const today = new Date(); today.setHours(0,0,0,0);
    if(d1 < today){ document.getElementById('bookingMsg').textContent = 'No se permiten fechas pasadas.'; return false; }
    document.getElementById('bookingMsg').textContent = `Reserva simulada registrada: ${name} ‚Äî ${inDate} ‚Üí ${outDate}. Confirmaremos por ${email} (simulaci√≥n para proyecto).`;
    return false;
  }

  /* -------------------------
     Accessibility: shortcuts
     ------------------------- */
  window.addEventListener('keydown', (e)=>{
    if(e.key === '1') $('#startCollector').click();
    if(e.key === '2') $('#startMemory').click();
    if(e.key === 'g') openSection('galeria');
    if(e.key === 'i') openSection('info');
  });

  /* -------------------------
     Hide broken gallery images
     ------------------------- */
  window.addEventListener('load', ()=>{
    $$('.gallery img').forEach(img => img.onerror = ()=> img.style.display = 'none');
  });

  </script>

  <!--
    INSTRUCCIONES R√ÅPIDAS (AL FINAL DEL ARCHIVO PARA TU CONVENIENCIA)

    C√≥mo cambiar las im√°genes (r√°pido):
    - Este archivo ya usa im√°genes enlazadas p√∫blicamente (Wikimedia / Pexels).
    - Si quieres sustituir una imagen por otra, busca su URL directa (termina en .jpg/.png) y reemplaza la URL en el atributo background-image (slider) o en el src (galer√≠a / memoria).
      Ejemplo (slider):
        <div class="slide" style="background-image:url('https://mi-nueva-imagen.com/mi.jpg')"></div>
      Ejemplo (galer√≠a):
        <img src="https://mi-nueva-imagen.com/fosil.jpg" alt="F√≥sil X">

    Subir a GitHub Pages (resumen):
    1) Crea un repositorio nuevo en GitHub (por ejemplo "cronoviajes").
    2) Sube este archivo `index.html` a la ra√≠z del repositorio.
       - Desde web: "Add file" -> "Upload files".
       - Desde tu PC (git): git init -> git add index.html -> git commit -m "site" -> git remote add origin <repo-url> -> git push -u origin main
    3) En GitHub, abre Settings -> Pages -> Source: main (branch) / root (/) -> Save. Espera unos minutos.
    4) Tu sitio estar√° en https://TU_USUARIO.github.io/TU_REPO/

    Consejos:
    - Si quieres usar tus fotos locales, s√∫belas a la carpeta `images/` en el repo y cambia las rutas <img src="images/mi.jpg">.
    - Comprime im√°genes para web antes de subir (TinyPNG / Squoosh) para que la p√°gina cargue m√°s r√°pido.
  -->

</body>
</html>
